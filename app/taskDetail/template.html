<div id="task-detail" *ngIf="task != undefined">
    <div id="header">
        <div id="title-group">
            <span id="task-title">
                {{task.objective}}
            </span>
            <span id="task-subtitle">
                {{taskCreated}} - {{taskCompleted}}
            </span>
        </div>
        <div title="Delete this task" class="button large-button clear"(click)="deleteSelf()">
            <div class="clear-text large-button-content">delete</div>
        </div>
    </div>
    <div id="task-details">
        <div class="detail-section">
            <div class="section-title">
                <span>Notes</span>
                <div class="button-group">
                    <div class="mini-button button add" 
                        (click)="addNote()">
                        <div class="add-text mini-button button-content">add</div>
                    </div>
                    <div class="mini-button button clear" 
                        (click)="deleteSelected('notes')">
                        <div class="clear-text mini-button-content">delete</div>
                    </div>
                </div>
            </div>
            <div class="section-item" *ngFor="let note of task.notes; let i = index">
                <div class="checkbox" 
                    (click)='toggleNote(i)' 
                    [ngClass]="{checked : selectedNotes.includes(i)}">
                </div>
                <span class="item-title">{{note}}</span>
            </div>
            <div class="pending section-item" *ngIf="pendingNote != null">
                <div class="input-container">
                    <label for="pending-note" 
                            class="input-label">Note</label>
                    <input id="pending-note" 
                            type="text" 
                            [(ngModel)]="pendingNote" 
                            name="pending-duration" 
                            class="input"/>
                </div>
                <div title="Add note" class="button mini-button button add" (click)="finalizeNote()">
                    <div class="add-text mini-button-content">done</div>
                </div>
                <div title="Cancel" class="button mini-button button clear" (click)="clearNote()">
                    <div class="clear-text mini-button-content">clear</div>
                </div>
            </div>
        </div>
        <div class="detail-section">
            <div class="section-title">
                <span>Work</span>
                <div class="button-group">
                    <div title="Record some work you have done for this task" class="button mini-button add" 
                        (click)="addWork()">
                        <div class="add-text  mini-button-content">add</div>
                    </div>
                    <div class="mini-button button clear" 
                        (click)="deleteSelected('work')">
                        <div class="clear-text  mini-button-content">delete</div>
                    </div>
                </div>
            </div>
            <div class="section-item" *ngFor="let work of task.work;let i = index">
                <div class="checkbox" 
                        (click)='toggleWork(i)' 
                        [ngClass]="{checked: selectedWork.includes(i)}"></div>
                <span class="item-title">{{work.start}} {{work.duration}}</span>
            </div>
            <div class="pending section-item" *ngIf="pendingWorkDate != '' && pendingWorkDuration != null">
                <div class="input-container">
                    <label for="pending-start" class="input-label">Start</label>
                    <input id="pending-start" 
                            type="datetime-local" 
                            [(ngModel)]="pendingWorkDate" 
                            placeholder="Start" 
                            class="input" />
                </div>
                <div class="input-container">
                    <label for="pending-duration" class="input-label">Duration</label>
                    <input id="pending-duration" 
                            type="number" 
                            [(ngModel)]="pendingWorkDuration" 
                            name="pending-duration" 
                            class="input"/>
                </div>
                <div title="Add work" class="mini-button button add  mini-button button-content" (click)="finalizeWork()">
                    <div class="add-text mini-button button-content">done</div>
                </div>
                <div title="cancel" class="mini-button button clear" (click)="clearWork()">
                    <div class="clear-text mini-button button-content">clear</div>
                </div>
            </div>
        </div>
    </div>
</div>